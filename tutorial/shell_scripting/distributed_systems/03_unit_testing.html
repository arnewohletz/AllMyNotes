<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
    
    <script src="https://unpkg.com/mermaid@10.9.0/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Unit testing &mdash; All-My-Notes  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=87e54e7c" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css?v=5c84f910" />
      <link rel="stylesheet" type="text/css" href="../../../_static/docsearch.css?v=45fb5152" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=908fc493" />
      <link rel="stylesheet" type="text/css" href="../../../_static/rtd-docsearch-custom.css?v=726ab6ef" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/thebelab-helper.js"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script defer="defer" src="../../../_static/docsearch.js?v=77274085"></script>
        <script defer="defer" src="../../../_static/docsearch_config.js?v=a08cdb4b"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
        <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js?v=ffc8af2d"></script>
        <script src="../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js?v=12818e64"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="next" title="Linux: Manage scripts via cron job" href="../cronjobs.html" />
    <link rel="prev" title="Code Reusability" href="02_reusability.html" /> 
</head>

<body class="wy-body-for-nav">
    <link rel="stylesheet" media="screen" href="https://fontlibrary.org//face/symbola" type="text/css"/>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a><div id="docsearch"></div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../cpp/index.html">C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docker/index.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../java/index.html">Java</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jenkins/index.html">Jenkins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Python</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Shell Scripting</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Distributed Systems - A Bash Tutorial</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="01_best_practices.html">Best practices </a></li>
<li class="toctree-l3"><a class="reference internal" href="02_reusability.html">Code Reusability </a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Unit testing </a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#define-the-tests">Define the tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implement-the-tests">Implement the tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#execute-the-tests">Execute the tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameterized-tests">Parameterized Tests</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#definition">Definition</a></li>
<li class="toctree-l5"><a class="reference internal" href="#execution">Execution</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cronjobs.html">Linux: Manage scripts via cron job</a></li>
<li class="toctree-l2"><a class="reference internal" href="../macos_zsh_basic.html">macOS: zsh and launchd</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How-To</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/docker/index.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/firefox/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/games/index.html">Games</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/jenkins/index.html">Jenkins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/linux/index.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/macos/index.html">macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/network/index.html">Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/others/index.html">Others</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/python/index.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/shell_scripting/index.html">Shell Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/software_design/index.html">Software Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/sphinx/index.html">Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/testing/index.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto/windows/index.html">Windows</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/coding_fonts.html">Coding fonts </a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/conda_commands.html">conda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/docker/index.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/git/index.html">git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/kubernetes.html">Kubectl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/linux/index.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/logitech_k860.html">Logitech K860 - Special keys </a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/network/index.html">Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/others/index.html">Others</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/pycharm_plugins.html">Pycharm Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/python/index.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/rst_sphinx.html">reStructuredText &amp; Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/shell_scripting.html">Shell Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/sqlite/index.html">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/vscode_extensions.html">Visual Studio Code extensions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">All-My-Notes</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Shell Scripting</a></li>
          <li class="breadcrumb-item"><a href="index.html">Distributed Systems - A Bash Tutorial</a></li>
      <li class="breadcrumb-item active">Unit testing </li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/tutorial/shell_scripting/distributed_systems/03_unit_testing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="unit-testing">
<h1>Unit testing <a class="footnote-reference brackets" href="#footcite-kruk22-nachkontrolle" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a><a class="headerlink" href="#unit-testing" title="Link to this heading"></a></h1>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p><strong>Update Bash on macOS</strong> <a class="footnote-reference brackets" href="#footcite-weibel-upgradebash" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p>
<p>Make sure to use a recent version of bash (for example, the executable
<code class="code highlight bash docutils literal highlight-bash">readarray</code> is not available on older versions. Since <strong>macOS</strong> contains
a very old version of bash (3.2 from 2007) due to a licensing change and
might drop bash entirely in the future, install it manually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1">brew<span class="w"> </span>install<span class="w"> </span>bash</span>
</pre></div></div><p>When calling bash, the new version is now called. Also add the new bash to your
list of trusted shells. Run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">sudo<span class="w"> </span>nano<span class="w"> </span>/etc/shells</span>
</pre></div></div><p>and add <code class="docutils literal notranslate"><span class="pre">/usr/local/bin/bash</span></code> to the list.</p>
<p><strong>Important</strong>: In case your bash scripts use a shebang line, change it to</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/local/bin/bash</span>
</pre></div>
</div>
</div>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/shellspec/shellspec">Spell Check</a> is a Behavior-Driven Development unit testing framework designed
for dash, bash, ksh, zsh and all POSIX shells.</p>
<p>To install it, follow the instructions on <a class="reference external" href="https://github.com/shellspec/shellspec#installation">https://github.com/shellspec/shellspec#installation</a>.</p>
<p>On macOS, install it via <em>homebrew</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">brew<span class="w"> </span>tap<span class="w"> </span>shellspec/shellspec</span>
<span class="prompt1">brew<span class="w"> </span>install<span class="w"> </span>shellspec</span>
</pre></div></div><p>On Linux, build the binaries from the sources:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">git<span class="w"> </span>clone<span class="w"> </span>https://github.com/shellspec/shellspec</span>
<span class="prompt1"><span class="nb">cd</span><span class="w"> </span>spellcheck</span>
<span class="prompt1">sudo<span class="w"> </span>make<span class="w"> </span>install</span>
</pre></div></div></section>
<section id="define-the-tests">
<h2>Define the tests<a class="headerlink" href="#define-the-tests" title="Link to this heading"></a></h2>
<p>Tests are organized in Specfiles. It comprises of one or multiple test groups.
It is advised to use the name of the function a group is supposed to test.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Describe<span class="w"> </span><span class="s2">&quot;FunctionUnderTest&quot;</span>
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;BehaviourUnderTest&quot;</span>
<span class="w">    </span><span class="c1"># test code</span>
<span class="w">  </span>End
End
</pre></div>
</div>
<p>Here are the functions, that need to be tested:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>array_to_lines<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span><span class="nv">array</span><span class="o">=(</span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span><span class="o">)</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="si">${#</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="w"> </span>&gt;<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;%s\n&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="o">}</span>

array_sort<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span><span class="nv">array</span><span class="o">=(</span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span><span class="o">)</span>
<span class="w">  </span>array_to_lines<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-V
<span class="o">}</span>

array_contains<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span><span class="nv">needle</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span><span class="nv">haystack</span><span class="o">=(</span><span class="s2">&quot;</span><span class="si">${</span><span class="p">@:</span><span class="nv">2</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">)</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>cur
<span class="w">  </span><span class="k">for</span><span class="w"> </span>cur<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">haystack</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$needle</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$cur</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">done</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The function <code class="code highlight bash docutils literal highlight-bash">array_to_lines<span class="o">()</span></code> returns a array line by line. The criteria to
test are</p>
<ul class="simple">
<li><p>all input elements are also in the output</p></li>
<li><p>the output features the same amount of elements as the input</p></li>
<li><p>if the input array is empty, there must not be any standard output</p></li>
<li><p>the order of the output elements match the ones in the input array</p></li>
</ul>
<p>The function <code class="code highlight bash docutils literal highlight-bash">array_sort<span class="o">()</span></code> sorts an array. The criteria are</p>
<ul class="simple">
<li><p>no standard output for empty input array</p></li>
<li><p>output must be sorted (no digit-wise sorting, since 1,3,20 would become 1,20,3)</p></li>
<li><p>all input elements are also in the output</p></li>
</ul>
<p>The function <code class="code highlight bash docutils literal highlight-bash">array_contains<span class="o">()</span></code> checks if an array contains a certain element.
The criteria are</p>
<ul class="simple">
<li><p>elements located at the very first, somewhere in the middle and very last position
of an array must be found</p></li>
<li><p>no success if reported if element is not found</p></li>
<li><p>if the passed in array is empty, the return value must not be 0</p></li>
</ul>
<p>This is the resulting <code class="docutils literal notranslate"><span class="pre">.specfile</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Describe<span class="w"> </span><span class="s2">&quot;array_to_lines()&quot;</span>
<span class="w">  </span>Pending<span class="w"> </span><span class="s2">&quot;Not implemented&quot;</span>

<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;output each element of the input array&quot;</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;amount of output elements match input array element amount&quot;</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;don&#39;t output anything if input array is empty&quot;</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;order of elements is not changed&quot;</span>
<span class="w">  </span>End
End

Describe<span class="w"> </span><span class="s2">&quot;array_sort()&quot;</span>
<span class="w">  </span>Pending<span class="w"> </span><span class="s2">&quot;Not implemented&quot;</span>

<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;don&#39;t output anything if input array is empty&quot;</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;each input element is output&quot;</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;no digit-wise sorting&quot;</span>
<span class="w">  </span>End
End

Describe<span class="w"> </span><span class="s2">&quot;array_contains()&quot;</span>
<span class="w">  </span>Pending<span class="w"> </span><span class="s2">&quot;Not implemented&quot;</span>

<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;find element at the very beginning of array&quot;</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;find element in the middle of the array&quot;</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;find element at the very end of the array&quot;</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;return 1 if element was not found&quot;</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;return 1 if input array is empty&quot;</span>
<span class="w">  </span>End
End
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Describe<span class="colon">:</span></dt>
<dd class="field-odd"><p>Defines the test group (closed via <code class="code highlight bash docutils literal highlight-bash">End</code>)</p>
</dd>
<dt class="field-even">It<span class="colon">:</span></dt>
<dd class="field-even"><p>Defines a test case (closed via <code class="code highlight bash docutils literal highlight-bash">End</code>)</p>
</dd>
<dt class="field-odd">Pending<span class="colon">:</span></dt>
<dd class="field-odd"><p>Defines that these tests are supposed to be skipped.</p>
</dd>
</dl>
</section>
<section id="implement-the-tests">
<h2>Implement the tests<a class="headerlink" href="#implement-the-tests" title="Link to this heading"></a></h2>
<p>The first test case for <code class="code highlight bash docutils literal highlight-bash">array_to_lines<span class="o">()</span></code> cannot be implemented with
<em>ShellSpec</em> alone, but requires an additional shell helper function, which is
then called by the framework:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>It<span class="w"> </span><span class="s2">&quot;output each element of the input array&quot;</span>
<span class="linenos"> 2</span><span class="w">  </span>_test_array_to_lines_output_complete<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="linenos"> 3</span><span class="w">    </span><span class="nb">local</span><span class="w"> </span>input
<span class="linenos"> 4</span><span class="w">    </span><span class="nb">local</span><span class="w"> </span>output
<span class="linenos"> 5</span><span class="w">    </span><span class="nb">local</span><span class="w"> </span>input_element
<span class="linenos"> 6</span><span class="w">    </span><span class="nv">input</span><span class="o">=(</span>
<span class="linenos"> 7</span><span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="s2">&quot; &quot;</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;--&quot;</span>
<span class="linenos"> 9</span><span class="w">      </span><span class="s2">&quot;a&quot;</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="w"> </span><span class="s2">&quot;d&quot;</span>
<span class="linenos">10</span><span class="w">    </span><span class="o">)</span>
<span class="linenos">11</span><span class="w">    </span><span class="nv">ausgabe</span><span class="o">=()</span>
<span class="linenos">12</span><span class="w">    </span>readarray<span class="w"> </span>-t<span class="w"> </span>output<span class="w"> </span>&lt;<span class="w"> </span>&lt;<span class="o">(</span>array_to_lines<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">input</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">)</span>
<span class="linenos">13</span><span class="w">    </span><span class="k">for</span><span class="w"> </span>input_element<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">input</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="linenos">14</span><span class="w">      </span><span class="nb">local</span><span class="w"> </span>-i<span class="w"> </span>is_in_output
<span class="linenos">15</span><span class="w">      </span><span class="nb">local</span><span class="w"> </span>output_element
<span class="linenos">16</span><span class="w">      </span><span class="nv">is_in_output</span><span class="o">=</span><span class="m">0</span>
<span class="linenos">17</span><span class="w">        </span><span class="k">for</span><span class="w"> </span>output_element<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">output</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="linenos">18</span><span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$input_element</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output_element</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="linenos">19</span><span class="w">            </span><span class="nv">is_in_output</span><span class="o">=</span><span class="m">1</span>
<span class="linenos">20</span><span class="w">            </span><span class="k">break</span>
<span class="linenos">21</span><span class="w">          </span><span class="k">fi</span>
<span class="linenos">22</span><span class="w">        </span><span class="k">done</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">is_in_output</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="linenos">25</span><span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="linenos">26</span><span class="w">        </span><span class="k">fi</span>
<span class="linenos">27</span><span class="w">    </span><span class="k">done</span>
<span class="linenos">28</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="linenos">29</span><span class="o">}</span>
<span class="linenos">30</span>When<span class="w"> </span>call<span class="w"> </span>_test_array_to_lines_output_complete
<span class="linenos">31</span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">0</span>
<span class="linenos">32</span>End
</pre></div>
</div>
<dl class="field-list">
<dt class="field-odd">line 2<span class="colon">:</span></dt>
<dd class="field-odd"><p>Definition of helper function.</p>
</dd>
<dt class="field-even">line 12<span class="colon">:</span></dt>
<dd class="field-even"><p>Calling <a class="reference external" href="https://helpmanual.io/builtin/readarray/">readarray</a> which takes the result of <code class="code highlight bash docutils literal highlight-bash">array_to_lines<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">input</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span></code>
as input and saves the result into <code class="code highlight bash docutils literal highlight-bash">output</code>.</p>
</dd>
<dt class="field-odd">line 13 - 28<span class="colon">:</span></dt>
<dd class="field-odd"><p>Loop through all input elements and compare them with all output elements.
If it is found return 0 otherwise 1.</p>
</dd>
<dt class="field-even">line 30<span class="colon">:</span></dt>
<dd class="field-even"><p>Calls the <code class="code highlight bash docutils literal highlight-bash">_test_array_to_lines_output_complete</code> helper function.
The <code class="code highlight bash docutils literal highlight-bash">When</code> directive marks the evaluation procedure.</p>
</dd>
<dt class="field-odd">line 31<span class="colon">:</span></dt>
<dd class="field-odd"><p>The previous call status is checked (if it is not 0 the test fails).
The <code class="code highlight bash docutils literal highlight-bash">The</code> directive marks the expectation.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>To compare the stdout with a string, use <code class="code highlight bash docutils literal highlight-bash">stdout<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;my_string&quot;</span></code>.</p>
</div>
</dd>
</dl>
<p>The next test case, comparing the amount of outputted lines with the amount of
elements in the array, can be implemented without an additional helper method:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>It<span class="w"> </span><span class="s2">&quot;amount of output elements match input array element amount&quot;</span>
<span class="w">  </span>When<span class="w"> </span>call<span class="w"> </span>array_to_lines<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="w">  </span>The<span class="w"> </span>lines<span class="w"> </span>of<span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">5</span>
End
</pre></div>
</div>
<p>Checking for no output when passing an empty array. It suffices to check for the
return code and skip the check on the non-existing stdout:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>It<span class="w"> </span><span class="s2">&quot;don&#39;t output anything if input array is empty&quot;</span>
<span class="w">  </span>When<span class="w"> </span>call<span class="w"> </span>array_to_lines
<span class="w">  </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">0</span>
End
</pre></div>
</div>
<p>To test the order of the output lines, you may use the <code class="code highlight bash docutils literal highlight-bash">line</code> directive
of Spell Check:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>It<span class="w"> </span><span class="s2">&quot;order of elements is not changed&quot;</span>
<span class="w">  </span>When<span class="w"> </span>call<span class="w"> </span>array_to_lines<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w">  </span>The<span class="w"> </span>line<span class="w"> </span><span class="m">1</span><span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;1&quot;</span>
<span class="w">  </span>The<span class="w"> </span>line<span class="w"> </span><span class="m">2</span><span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="w">  </span>The<span class="w"> </span>line<span class="w"> </span><span class="m">3</span><span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;3&quot;</span>
End
</pre></div>
</div>
<p>The first two test cases for <code class="code highlight bash docutils literal highlight-bash">array_sort<span class="o">()</span></code> are implemented similarly (the
‘output complete’ test requires another helper method like <code class="code highlight bash docutils literal highlight-bash">_test_array_sort_output_complete</code>,
see below for implementation).
The third one, checking for non-digit sorting is implemented as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>It<span class="w"> </span><span class="s2">&quot;no digit-wise sorting&quot;</span>
<span class="w">  </span>When<span class="w"> </span>call<span class="w"> </span>array_sort<span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span>
<span class="w">  </span>The<span class="w"> </span>line<span class="w"> </span><span class="m">1</span><span class="w"> </span>of<span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>be<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;1&quot;</span>
<span class="w">  </span>The<span class="w"> </span>line<span class="w"> </span><span class="m">2</span><span class="w"> </span>of<span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>be<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;3&quot;</span>
<span class="w">  </span>The<span class="w"> </span>line<span class="w"> </span><span class="m">2</span><span class="w"> </span>of<span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>be<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;20&quot;</span>
End
</pre></div>
</div>
<p>Also all test cases needed for <code class="code highlight bash docutils literal highlight-bash">array_contains<span class="o">()</span></code> can be implemented
without helper methods:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Describe<span class="w"> </span><span class="s2">&quot;array_contains()&quot;</span>
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;find element at the very beginning of array&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_contains<span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span><span class="s2">&quot;3&quot;</span>
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;find element in the middle of the array&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_contains<span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span><span class="s2">&quot;3&quot;</span>
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;find element at the very end of the array&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_contains<span class="w"> </span><span class="s2">&quot;3&quot;</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span><span class="s2">&quot;3&quot;</span>
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;return 1 if element was not found&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_contains<span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span><span class="s2">&quot;3&quot;</span>
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">1</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;return 1 if input array is empty&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_contains<span class="w"> </span><span class="s2">&quot;0&quot;</span>
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">1</span>
<span class="w">  </span>End
End
</pre></div>
</div>
</section>
<section id="execute-the-tests">
<h2>Execute the tests<a class="headerlink" href="#execute-the-tests" title="Link to this heading"></a></h2>
<p>As the methods under test are defined outside of the <code class="docutils literal notranslate"><span class="pre">.specfile</span></code> the module
framework including the array module must be loaded into it. As specfiles support
regular shell expressions, an <code class="code highlight bash docutils literal highlight-bash">include</code> statement before the first
test group is sufficient. An error handling for that is not required as
Shell-Check will report to us in case of errors:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.<span class="w"> </span>bms.sh
include<span class="w"> </span><span class="s2">&quot;array&quot;</span>

Describe<span class="w"> </span><span class="s2">&quot;array_to_lines()&quot;</span>
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;output each element of the input array&quot;</span>
<span class="w">    </span>It<span class="w"> </span><span class="s2">&quot;output each element of the input array&quot;</span>
<span class="w">        </span><span class="nb">local</span><span class="w"> </span>input
<span class="w">        </span><span class="nb">local</span><span class="w"> </span>output
<span class="w">        </span><span class="nb">local</span><span class="w"> </span>input_element

<span class="w">        </span><span class="nv">input</span><span class="o">=(</span>
<span class="w">            </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span>
<span class="w">            </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="s2">&quot; &quot;</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;--&quot;</span>
<span class="w">            </span><span class="s2">&quot;a&quot;</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="w"> </span><span class="s2">&quot;d&quot;</span>
<span class="w">        </span><span class="o">)</span>
<span class="w">        </span><span class="nv">output</span><span class="o">=()</span>

<span class="w">        </span>readarray<span class="w"> </span>-t<span class="w"> </span>output<span class="w"> </span>&lt;<span class="w"> </span>&lt;<span class="o">(</span>array_to_lines<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">input</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">)</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span>input_element<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">input</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">            </span><span class="nb">local</span><span class="w"> </span>-i<span class="w"> </span>is_in_output
<span class="w">            </span><span class="nb">local</span><span class="w"> </span>output_element

<span class="w">            </span><span class="nv">is_in_output</span><span class="o">=</span><span class="m">0</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span>output_element<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">output</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$input_element</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output_element</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                    </span><span class="nv">is_in_output</span><span class="o">=</span><span class="m">1</span>
<span class="w">                    </span><span class="k">break</span>
<span class="w">                </span><span class="k">fi</span>
<span class="w">            </span><span class="k">done</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">is_in_output</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">            </span><span class="k">fi</span>
<span class="w">        </span><span class="k">done</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>_test_array_to_lines_output_complete
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>End

<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;amount of output elements match input array element amount&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_to_lines<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="w">    </span>The<span class="w"> </span>lines<span class="w"> </span>of<span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">5</span>
<span class="w">  </span>End

<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;don&#39;t output anything if input array is empty&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_to_lines
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>End

<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;order of elements is not changed&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_to_lines<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w">    </span>The<span class="w"> </span>line<span class="w"> </span><span class="m">1</span><span class="w"> </span>of<span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;1&quot;</span>
<span class="w">    </span>The<span class="w"> </span>line<span class="w"> </span><span class="m">2</span><span class="w"> </span>of<span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="w">    </span>The<span class="w"> </span>line<span class="w"> </span><span class="m">3</span><span class="w"> </span>of<span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;3&quot;</span>
<span class="w">  </span>End
End

Describe<span class="w"> </span><span class="s2">&quot;array_sort()&quot;</span>
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;don&#39;t output anything if input array is empty&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_to_lines
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>End

<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;each input element is output&quot;</span>
<span class="w">    </span>_test_array_sort_output_complete<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="nb">local</span><span class="w"> </span>input
<span class="w">        </span><span class="nb">local</span><span class="w"> </span>output
<span class="w">        </span><span class="nb">local</span><span class="w"> </span>input_element

<span class="w">        </span><span class="nv">input</span><span class="o">=(</span>
<span class="w">            </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span>
<span class="w">            </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="s2">&quot; &quot;</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;--&quot;</span>
<span class="w">            </span><span class="s2">&quot;a&quot;</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="w"> </span><span class="s2">&quot;d&quot;</span>
<span class="w">        </span><span class="o">)</span>
<span class="w">        </span><span class="nv">output</span><span class="o">=()</span>

<span class="w">        </span>readarray<span class="w"> </span>-t<span class="w"> </span>output<span class="w"> </span>&lt;<span class="w"> </span>&lt;<span class="o">(</span>array_sort<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">input</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">)</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span>input_element<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">input</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">            </span><span class="nb">local</span><span class="w"> </span>-i<span class="w"> </span>is_in_output
<span class="w">            </span><span class="nb">local</span><span class="w"> </span>output_element

<span class="w">            </span><span class="nv">is_in_output</span><span class="o">=</span><span class="m">0</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span>output_element<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">output</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$input_element</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output_element</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                    </span><span class="nv">is_in_output</span><span class="o">=</span><span class="m">1</span>
<span class="w">                    </span><span class="k">break</span>
<span class="w">                </span><span class="k">fi</span>
<span class="w">            </span><span class="k">done</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">is_in_output</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">            </span><span class="k">fi</span>
<span class="w">        </span><span class="k">done</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>_test_array_sort_output_complete
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>End

<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;no digit-wise sorting&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_sort<span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span>
<span class="w">    </span>The<span class="w"> </span>line<span class="w"> </span><span class="m">1</span><span class="w"> </span>of<span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;1&quot;</span>
<span class="w">    </span>The<span class="w"> </span>line<span class="w"> </span><span class="m">2</span><span class="w"> </span>of<span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;3&quot;</span>
<span class="w">    </span>The<span class="w"> </span>line<span class="w"> </span><span class="m">3</span><span class="w"> </span>of<span class="w"> </span>stdout<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;20&quot;</span>
<span class="w">  </span>End
End

Describe<span class="w"> </span><span class="s2">&quot;array_contains()&quot;</span>
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;find element at the very beginning of array&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_contains<span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span><span class="s2">&quot;3&quot;</span>
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>End

<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;find element in the middle of the array&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_contains<span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span><span class="s2">&quot;3&quot;</span>
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>End

<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;find element at the very end of the array&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_contains<span class="w"> </span><span class="s2">&quot;3&quot;</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span><span class="s2">&quot;3&quot;</span>
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">0</span>
<span class="w">  </span>End

<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;return 1 if element was not found&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_contains<span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span><span class="s2">&quot;3&quot;</span>
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">1</span>
<span class="w">  </span>End

<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;return 1 if input array is empty&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>array_contains<span class="w"> </span><span class="s2">&quot;0&quot;</span>
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="m">1</span>
<span class="w">  </span>End
End
</pre></div>
</div>
<p>You may save the upper code in <code class="docutils literal notranslate"><span class="pre">array_spec.sh</span></code> and execute it via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">shellcheck<span class="w"> </span>--shell<span class="w"> </span>bash<span class="w"> </span>--format<span class="w"> </span>documentation<span class="w"> </span>array_spec.sh</span>
</pre></div></div><p>This executes the tests and produces a test run documentation. Lastly, save
the <code class="docutils literal notranslate"><span class="pre">array_spec.sh</span></code> under <code class="docutils literal notranslate"><span class="pre">/usr/local/share/bms/test/</span></code>.</p>
</section>
<section id="parameterized-tests">
<h2>Parameterized Tests<a class="headerlink" href="#parameterized-tests" title="Link to this heading"></a></h2>
<section id="definition">
<h3>Definition<a class="headerlink" href="#definition" title="Link to this heading"></a></h3>
<p>One advantage of Spell-Check in comparison with other shell test framework (like
<a class="reference external" href="https://github.com/bats-core/bats-core">BATS</a>) is that is enables us to perform tests with a lot of different inputs.</p>
<p>For this purpose a new <code class="code highlight bash docutils literal highlight-bash">is</code> module is created containing these methods:</p>
<ul class="simple">
<li><p><code class="code highlight bash docutils literal highlight-bash">is_digits<span class="o">()</span></code>: checks if string only contains digits</p></li>
<li><p><code class="code highlight bash docutils literal highlight-bash">is_upper<span class="o">()</span></code>: checks if string only contains upper case characters</p></li>
<li><p><code class="code highlight bash docutils literal highlight-bash">is_lower<span class="o">()</span></code>: checks if string only contains lower case characters</p></li>
<li><p><code class="code highlight bash docutils literal highlight-bash">is_alnum<span class="o">()</span></code>: checks if string only contains letters and digits</p></li>
</ul>
<p>Create a new file <code class="docutils literal notranslate"><span class="pre">/usr/local/share/bms/include/is.sh</span></code> and implements the methods:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>is_digit<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="nb">local</span><span class="w"> </span><span class="nv">str</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$str</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span>~<span class="w"> </span>^<span class="o">[</span><span class="m">0</span>-9<span class="o">]</span>+$<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="linenos"> 4</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="linenos"> 5</span><span class="w">  </span><span class="k">fi</span>
<span class="linenos"> 6</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="linenos"> 7</span><span class="o">}</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>is_upper<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="linenos">10</span><span class="w">  </span><span class="nb">local</span><span class="w"> </span><span class="nv">str</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="linenos">11</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$str</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span>~<span class="w"> </span>^<span class="o">[</span>A-Z<span class="o">]</span>+$<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="linenos">12</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="linenos">13</span><span class="w">  </span><span class="k">fi</span>
<span class="linenos">14</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="linenos">15</span><span class="o">}</span>
<span class="linenos">16</span>
<span class="linenos">17</span>is_lower<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="linenos">18</span><span class="w">  </span><span class="nb">local</span><span class="w"> </span><span class="nv">str</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="linenos">19</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$str</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span>~<span class="w"> </span>^<span class="o">[</span>a-z<span class="o">]</span>+$<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="linenos">20</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="linenos">21</span><span class="w">  </span><span class="k">fi</span>
<span class="linenos">22</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="linenos">23</span><span class="o">}</span>
<span class="linenos">24</span>
<span class="linenos">25</span>is_alnum<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="linenos">26</span><span class="w">  </span><span class="nb">local</span><span class="w"> </span><span class="nv">str</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="linenos">27</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$str</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span>~<span class="w"> </span>^<span class="o">[</span>a-zA-Z0-9<span class="o">]</span>+$<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="linenos">28</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="linenos">29</span><span class="w">  </span><span class="k">fi</span>
<span class="linenos">30</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="linenos">31</span><span class="o">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">line 3 + 11 + 19 + 27<span class="colon">:</span></dt>
<dd class="field-odd"><p>Compare string with a regular expression.
<code class="code highlight bash docutils literal highlight-bash">^</code> and <code class="code highlight bash docutils literal highlight-bash">$</code> mark the begin and end of the expression.
The <code class="code highlight bash docutils literal highlight-bash"><span class="o">=</span>~</code> operator defines a regex match operation between a string
on the left side and a regex on the right side.</p>
</dd>
</dl>
<p>The <strong>is</strong> module also requires a constructor (same as array):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>__init<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
<section id="execution">
<h3>Execution<a class="headerlink" href="#execution" title="Link to this heading"></a></h3>
<p>To create dynamic parameters for tests, the directive <code class="code highlight bash docutils literal highlight-bash">Parameter:dynamic</code>
must be set. Before the next, concluding <code class="code highlight bash docutils literal highlight-bash">End</code>, values can be defined
using the special method <code class="code highlight bash docutils literal highlight-bash">%data</code>. Those</p>
<p>The tests are defined in <code class="docutils literal notranslate"><span class="pre">/usr/local/share/bms/include/test/is_spec.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>.<span class="w"> </span>bms.sh
<span class="linenos"> 2</span>include<span class="w"> </span><span class="s2">&quot;is&quot;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>Describe<span class="w"> </span><span class="s2">&quot;is_digits()&quot;</span>
<span class="linenos"> 5</span><span class="w">  </span>Parameters:dynamic
<span class="linenos"> 6</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">32</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="w"> </span><span class="m">127</span><span class="p">;</span><span class="w"> </span>i++<span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="linenos"> 7</span><span class="w">        </span><span class="nv">c</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\\x</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;%02x&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$i</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span><span class="k">)</span>
<span class="linenos"> 8</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span>i<span class="w"> </span>&gt;<span class="o">=</span><span class="w"> </span><span class="m">48</span><span class="w"> </span><span class="o">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">((</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span><span class="m">57</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="linenos"> 9</span><span class="w">            </span>%data<span class="w"> </span><span class="s2">&quot;accepts &#39;</span><span class="nv">$c</span><span class="s2">&#39;&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$c</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">0</span>
<span class="linenos">10</span><span class="w">        </span><span class="k">else</span>
<span class="linenos">11</span><span class="w">            </span>%data<span class="w"> </span><span class="s2">&quot;accepts &#39;</span><span class="nv">$c</span><span class="s2">&#39; not&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$c</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">1</span>
<span class="linenos">12</span><span class="w">        </span><span class="k">fi</span>
<span class="linenos">13</span><span class="w">    </span><span class="k">done</span>
<span class="linenos">14</span><span class="w">  </span>End
<span class="linenos">15</span><span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="linenos">16</span><span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>is_digits<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
<span class="linenos">17</span><span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span>
<span class="linenos">18</span><span class="w">  </span>End
<span class="linenos">19</span>End
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">line 7<span class="colon">:</span></dt>
<dd class="field-odd"><p>Calculates the hexadecimal value of a decimal input (<code class="code highlight bash docutils literal highlight-bash"><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;%02x&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$i</span><span class="s2">&quot;</span></code>)
and get the associated ASCII character (<code class="code highlight bash docutils literal highlight-bash"><span class="nv">c</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\x&lt;HEX_CODE&gt;&quot;</span>
<span class="k">for</span><span class="w"> </span>example<span class="w"> </span>:bash:<span class="sb">`</span><span class="nv">c</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\x21&quot;</span><span class="k">)</span><span class="o">)</span></code>).</p>
</dd>
<dt class="field-even">line 9 + 11<span class="colon">:</span></dt>
<dd class="field-even"><p>Definition of test positional parameters using the <code class="code highlight bash docutils literal highlight-bash">%data</code> special
function. Here, for either the good case ( 48 &lt;= i &lt;= 57, which are ASCII
codes for the digits from 0 to 9) and the bad case (i within 32 and 127,
which are the printable ASCII character and outside of 48 to 57) three
positional values are passed to the test:</p>
<ol class="arabic simple">
<li><p>The test case name (for example “accepts ‘a’”)</p></li>
<li><p>The test data value (for example ‘a’)</p></li>
<li><p>The return code to assert against (for example 0)</p></li>
</ol>
</dd>
<dt class="field-odd">line 15 - 18<span class="colon">:</span></dt>
<dd class="field-odd"><p>The test which is supposed to use the upper defined values. The passed in
parameter are called via their position, for example <code class="code highlight bash docutils literal highlight-bash"><span class="nv">$1</span></code> for the
test case name (there is no $0).</p>
</dd>
</dl>
<p>The other tests are similar:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Describe<span class="w"> </span><span class="s2">&quot;is_upper()&quot;</span>
<span class="w">  </span>Parameters:dynamic
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">32</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="w"> </span><span class="m">127</span><span class="p">;</span><span class="w"> </span>i++<span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="nv">c</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\\x</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;%02x&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$i</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span><span class="k">)</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span>i<span class="w"> </span>&gt;<span class="o">=</span><span class="w"> </span><span class="m">65</span><span class="w"> </span><span class="o">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">((</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span><span class="m">90</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">            </span>%data<span class="w"> </span><span class="s2">&quot;akzeptiert &#39;</span><span class="nv">$c</span><span class="s2">&#39;&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$c</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">0</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">            </span>%data<span class="w"> </span><span class="s2">&quot;akzeptiert &#39;</span><span class="nv">$c</span><span class="s2">&#39; nicht&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$c</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">1</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>is_upper<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span>
<span class="w">  </span>End
End

Describe<span class="w"> </span><span class="s2">&quot;is_lower()&quot;</span>
<span class="w">  </span>Parameters:dynamic
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">32</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="w"> </span><span class="m">127</span><span class="p">;</span><span class="w"> </span>i++<span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="nv">c</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\\x</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;%02x&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$i</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span><span class="k">)</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span>i<span class="w"> </span>&gt;<span class="o">=</span><span class="w"> </span><span class="m">97</span><span class="w"> </span><span class="o">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">((</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span><span class="m">122</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">            </span>%data<span class="w"> </span><span class="s2">&quot;akzeptiert &#39;</span><span class="nv">$c</span><span class="s2">&#39;&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$c</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">0</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">            </span>%data<span class="w"> </span><span class="s2">&quot;akzeptiert &#39;</span><span class="nv">$c</span><span class="s2">&#39; nicht&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$c</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">1</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>is_lower<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span>
<span class="w">  </span>End
End

Describe<span class="w"> </span><span class="s2">&quot;is_alnum()&quot;</span>
<span class="w">  </span>Parameters:dynamic
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">32</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="w"> </span><span class="m">127</span><span class="p">;</span><span class="w"> </span>i++<span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="nv">c</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\\x</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;%02x&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$i</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span><span class="k">)</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">((</span><span class="w"> </span>i<span class="w"> </span>&gt;<span class="o">=</span><span class="w"> </span><span class="m">48</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span><span class="m">57</span><span class="w"> </span><span class="o">))</span><span class="w"> </span><span class="o">||</span>
<span class="w">           </span><span class="o">((</span><span class="w"> </span>i<span class="w"> </span>&gt;<span class="o">=</span><span class="w"> </span><span class="m">65</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span><span class="m">90</span><span class="w"> </span><span class="o">))</span><span class="w"> </span><span class="o">||</span>
<span class="w">           </span><span class="o">((</span><span class="w"> </span>i<span class="w"> </span>&gt;<span class="o">=</span><span class="w"> </span><span class="m">97</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span><span class="m">122</span><span class="w"> </span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">            </span>%data<span class="w"> </span><span class="s2">&quot;akzeptiert &#39;</span><span class="nv">$c</span><span class="s2">&#39;&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$c</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">0</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">            </span>%data<span class="w"> </span><span class="s2">&quot;akzeptiert &#39;</span><span class="nv">$c</span><span class="s2">&#39; nicht&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$c</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">1</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span>End
<span class="w">  </span>It<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="w">    </span>When<span class="w"> </span>call<span class="w"> </span>is_alnum<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
<span class="w">    </span>The<span class="w"> </span>status<span class="w"> </span>should<span class="w"> </span>equal<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span>
<span class="w">  </span>End
End
</pre></div>
</div>
<p>To execute the tests, again call shellspec:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">shellcheck<span class="w"> </span>--shell<span class="w"> </span>bash<span class="w"> </span>--format<span class="w"> </span>documentation<span class="w"> </span>is_spec.sh</span>
</pre></div></div><div class="docutils container" id="id3">
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footcite-kruk22-nachkontrolle" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Matthias Kruk. Nachkontrolle. <em>Linux Magazin</em>, 08/2022:80–88, 2022.</p>
</aside>
<aside class="footnote brackets" id="footcite-weibel-upgradebash" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Daniel Weibel. Upgrading bash on macos. 2019. URL: <a class="reference external" href="https://itnext.io/upgrading-bash-on-macos-7138bd1066ba">https://itnext.io/upgrading-bash-on-macos-7138bd1066ba</a> (visited on 2022-07-12).</p>
</aside>
</aside>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="02_reusability.html" class="btn btn-neutral float-left" title="Code Reusability" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../cronjobs.html" class="btn btn-neutral float-right" title="Linux: Manage scripts via cron job" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
      <div class="lastupdate">
        This page was last updated on
        <span class="update_date">Jun 20, 2024</span>.
      </div>
    
    <p>&#169; Copyright 2021-2024, Arne Wohletz.</p>

  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>